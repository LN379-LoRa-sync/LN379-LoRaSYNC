[
    {
        "id": "25dc77b9.3d62c",
        "type": "tab",
        "label": "Flow 1",
        "disabled": false,
        "info": ""
    },
    {
        "id": "b3e4cb20.a62928",
        "type": "http in",
        "z": "25dc77b9.3d62c",
        "name": "Rainfalldata",
        "url": "http://rtsfros.com/RTDAS/RainModel.aspx?id=1012",
        "method": "get",
        "upload": false,
        "swaggerDoc": "",
        "x": 90,
        "y": 120,
        "wires": [
            [
                "ac6aa0d6.093fb",
                "7d19269f.693f28"
            ]
        ]
    },
    {
        "id": "63a54fca.63552",
        "type": "mqtt in",
        "z": "25dc77b9.3d62c",
        "name": "Inflow of water",
        "topic": "esp/test",
        "qos": "2",
        "datatype": "auto",
        "broker": "9b9b1264.c7985",
        "x": 90,
        "y": 180,
        "wires": [
            [
                "b74b65eb.5c2c38",
                "295145a3.a9819a",
                "60a3606a.75af9"
            ]
        ]
    },
    {
        "id": "c4513c98.109bf",
        "type": "mqtt in",
        "z": "25dc77b9.3d62c",
        "name": "",
        "topic": "Outflowdata",
        "qos": "2",
        "datatype": "auto",
        "broker": "9b9b1264.c7985",
        "x": 90,
        "y": 240,
        "wires": [
            [
                "8521764a.4f07a8"
            ]
        ]
    },
    {
        "id": "ac6aa0d6.093fb",
        "type": "json",
        "z": "25dc77b9.3d62c",
        "name": "RN",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 290,
        "y": 80,
        "wires": [
            [
                "5ffd126e.e4327c"
            ]
        ]
    },
    {
        "id": "b74b65eb.5c2c38",
        "type": "json",
        "z": "25dc77b9.3d62c",
        "name": "RN",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 310,
        "y": 140,
        "wires": [
            [
                "7f795226.21eefc"
            ]
        ]
    },
    {
        "id": "8521764a.4f07a8",
        "type": "json",
        "z": "25dc77b9.3d62c",
        "name": "RN",
        "property": "payload",
        "action": "",
        "pretty": false,
        "x": 290,
        "y": 200,
        "wires": [
            [
                "e4576cb.802ea9"
            ]
        ]
    },
    {
        "id": "7d19269f.693f28",
        "type": "debug",
        "z": "25dc77b9.3d62c",
        "name": "Dis_RN",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 240,
        "y": 380,
        "wires": []
    },
    {
        "id": "295145a3.a9819a",
        "type": "debug",
        "z": "25dc77b9.3d62c",
        "name": "Dis_Inflow",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 250,
        "y": 420,
        "wires": []
    },
    {
        "id": "60a3606a.75af9",
        "type": "debug",
        "z": "25dc77b9.3d62c",
        "name": "Dis_OUT",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 220,
        "y": 500,
        "wires": []
    },
    {
        "id": "fe6584de.87d348",
        "type": "mysql",
        "z": "25dc77b9.3d62c",
        "mydb": "40890955.a85948",
        "name": "Databases",
        "x": 650,
        "y": 20,
        "wires": [
            []
        ]
    },
    {
        "id": "5ffd126e.e4327c",
        "type": "template",
        "z": "25dc77b9.3d62c",
        "name": "",
        "field": "topic",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "INSERT INTO railfall(id,name,water_level)\nVALUES('{{payload.id}}','{{payload.name}}',{{payload.water_level}});",
        "output": "str",
        "x": 460,
        "y": 80,
        "wires": [
            [
                "fe6584de.87d348",
                "313bd8df.73bed8"
            ]
        ]
    },
    {
        "id": "e4576cb.802ea9",
        "type": "template",
        "z": "25dc77b9.3d62c",
        "name": "",
        "field": "topic",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "INSERT INTO outflow(id,name,water_level)\nVALUES('{{payload.id}}','{{payload.name}}',{{payload.water_level}});",
        "output": "str",
        "x": 460,
        "y": 200,
        "wires": [
            [
                "fe6584de.87d348",
                "adf7eb26.a43cb8"
            ]
        ]
    },
    {
        "id": "7f795226.21eefc",
        "type": "template",
        "z": "25dc77b9.3d62c",
        "name": "",
        "field": "topic",
        "fieldType": "msg",
        "format": "handlebars",
        "syntax": "mustache",
        "template": "INSERT INTO inflow(id,name,water_level)\nVALUES('{{payload.id}}','{{payload.name}}',{{payload.water_level}});",
        "output": "str",
        "x": 460,
        "y": 140,
        "wires": [
            [
                "fe6584de.87d348",
                "adf7eb26.a43cb8"
            ]
        ]
    },
    {
        "id": "aa16ede8.743a6",
        "type": "switch",
        "z": "25dc77b9.3d62c",
        "name": "Decision",
        "property": "payload",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "140",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "160",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "180",
                "vt": "num"
            },
            {
                "t": "eq",
                "v": "200",
                "vt": "str"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 4,
        "x": 840,
        "y": 240,
        "wires": [
            [
                "29916865.c36e08",
                "90eabecb.44521"
            ],
            [
                "29916865.c36e08",
                "1e671e13.20a8c2"
            ],
            [
                "29916865.c36e08",
                "5bd9b7e.aea3748"
            ],
            [
                "2b2ffc41.cfabd4",
                "3f83e343.ff2adc"
            ]
        ]
    },
    {
        "id": "adf7eb26.a43cb8",
        "type": "function",
        "z": "25dc77b9.3d62c",
        "name": "Calculation",
        "func": "\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 650,
        "y": 200,
        "wires": [
            [
                "313bd8df.73bed8"
            ]
        ]
    },
    {
        "id": "313bd8df.73bed8",
        "type": "function",
        "z": "25dc77b9.3d62c",
        "name": "Rainrunoutrelatio",
        "func": "\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 710,
        "y": 120,
        "wires": [
            [
                "aa16ede8.743a6"
            ]
        ]
    },
    {
        "id": "275cc3da.f6ef3c",
        "type": "mqtt out",
        "z": "25dc77b9.3d62c",
        "name": "",
        "topic": "siren",
        "qos": "1",
        "retain": "true",
        "broker": "aec2d4ac.3af4e8",
        "x": 1190,
        "y": 160,
        "wires": []
    },
    {
        "id": "29916865.c36e08",
        "type": "change",
        "z": "25dc77b9.3d62c",
        "name": "change",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "OFF",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1000,
        "y": 140,
        "wires": [
            [
                "275cc3da.f6ef3c",
                "998a2521.32b9b8"
            ]
        ]
    },
    {
        "id": "2b2ffc41.cfabd4",
        "type": "change",
        "z": "25dc77b9.3d62c",
        "name": "change",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "ON",
                "tot": "str"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1020,
        "y": 240,
        "wires": [
            [
                "275cc3da.f6ef3c",
                "998a2521.32b9b8"
            ]
        ]
    },
    {
        "id": "998a2521.32b9b8",
        "type": "debug",
        "z": "25dc77b9.3d62c",
        "name": "Output",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 1190,
        "y": 220,
        "wires": []
    },
    {
        "id": "90eabecb.44521",
        "type": "trigger",
        "z": "25dc77b9.3d62c",
        "op1": "",
        "op2": "",
        "op1type": "pay",
        "op2type": "payl",
        "duration": "2",
        "extend": false,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "name": "",
        "x": 1070,
        "y": 300,
        "wires": [
            [
                "87922cb0.c1b95"
            ]
        ]
    },
    {
        "id": "87922cb0.c1b95",
        "type": "sms",
        "z": "25dc77b9.3d62c",
        "name": "Executive_Engineer",
        "message": "The level of water across the dam has reached to critical. Please move to safest zone.Emergency contact no:+911126187232.   You can view the live dashboard by goinh to the link: http://18.223.110.198:3000/d/cVFSgWVMk/new?orgId=1&from=1596110396017&to=1596283196018",
        "numbers": "+919420804744",
        "throttle": "1",
        "twilio": "6fefe367.a9edec",
        "x": 1260,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "1e671e13.20a8c2",
        "type": "trigger",
        "z": "25dc77b9.3d62c",
        "op1": "",
        "op2": "",
        "op1type": "pay",
        "op2type": "payl",
        "duration": "2",
        "extend": false,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "name": "",
        "x": 1070,
        "y": 360,
        "wires": [
            [
                "a500e87a.462b58"
            ]
        ]
    },
    {
        "id": "a500e87a.462b58",
        "type": "sms",
        "z": "25dc77b9.3d62c",
        "name": "District_Collector",
        "message": "The level of water across the dam has reached to critical. Please move to safest zone.Emergency contact no:+911126187232.   You can view the live dashboard by goinh to the link: http://18.223.110.198:3000/d/cVFSgWVMk/new?orgId=1&from=1596110396017&to=1596283196018",
        "numbers": "+919420804744",
        "throttle": "1",
        "twilio": "6fefe367.a9edec",
        "x": 1270,
        "y": 360,
        "wires": [
            []
        ]
    },
    {
        "id": "5bd9b7e.aea3748",
        "type": "trigger",
        "z": "25dc77b9.3d62c",
        "op1": "",
        "op2": "",
        "op1type": "pay",
        "op2type": "payl",
        "duration": "2",
        "extend": false,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "name": "",
        "x": 1070,
        "y": 400,
        "wires": [
            [
                "9ba16076.9ce4f"
            ]
        ]
    },
    {
        "id": "9ba16076.9ce4f",
        "type": "sms",
        "z": "25dc77b9.3d62c",
        "name": "CWC divisional office",
        "message": "The level of water across the dam has reached to critical. Please move to safest zone.Emergency contact no:+911126187232.   You can view the live dashboard by goinh to the link: http://18.223.110.198:3000/d/cVFSgWVMk/new?orgId=1&from=1596110396017&to=1596283196018",
        "numbers": "+919420804744",
        "throttle": "1",
        "twilio": "6fefe367.a9edec",
        "x": 1280,
        "y": 400,
        "wires": [
            []
        ]
    },
    {
        "id": "3f83e343.ff2adc",
        "type": "trigger",
        "z": "25dc77b9.3d62c",
        "op1": "",
        "op2": "",
        "op1type": "pay",
        "op2type": "payl",
        "duration": "2",
        "extend": false,
        "units": "min",
        "reset": "",
        "bytopic": "all",
        "name": "",
        "x": 1070,
        "y": 460,
        "wires": [
            [
                "52d233ee.8ef34c"
            ]
        ]
    },
    {
        "id": "52d233ee.8ef34c",
        "type": "sms",
        "z": "25dc77b9.3d62c",
        "name": "Everyone",
        "message": "The level of water across the dam has reached to critical. Please move to safest zone.Emergency contact no:+911126187232.   You can view the live dashboard by goinh to the link: http://18.223.110.198:3000/d/cVFSgWVMk/new?orgId=1&from=1596110396017&to=1596283196018",
        "numbers": "+919420804744",
        "throttle": "1",
        "twilio": "6fefe367.a9edec",
        "x": 1220,
        "y": 460,
        "wires": [
            []
        ]
    },
    {
        "id": "9b9b1264.c7985",
        "type": "mqtt-broker",
        "z": "",
        "name": "Temperature",
        "broker": "18.223.110.198",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "compatmode": true,
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "20208888/cube/data",
        "birthQos": "1",
        "birthRetain": "true",
        "birthPayload": "ONLINE",
        "closeTopic": "20208888/cube/data",
        "closeQos": "1",
        "closeRetain": "true",
        "closePayload": "OFFLINE",
        "willTopic": "20208888/cube/data",
        "willQos": "1",
        "willRetain": "true",
        "willPayload": "DISCONNECTED"
    },
    {
        "id": "40890955.a85948",
        "type": "MySQLdatabase",
        "z": "",
        "name": "IoT DB on Saumya AWS",
        "host": "localhost",
        "port": "3306",
        "db": "db1",
        "tz": ""
    },
    {
        "id": "aec2d4ac.3af4e8",
        "type": "mqtt-broker",
        "z": "",
        "name": "esp8266",
        "broker": "18.223.110.198",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "compatmode": true,
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "ACE/OP",
        "birthQos": "0",
        "birthRetain": "true",
        "birthPayload": "ONLINE",
        "closeTopic": "ACE/OP",
        "closeQos": "0",
        "closeRetain": "true",
        "closePayload": "OFFLINE",
        "willTopic": "",
        "willQos": "0",
        "willPayload": ""
    },
    {
        "id": "6fefe367.a9edec",
        "type": "twilioConfig",
        "z": "",
        "name": "twilioConfig"
    }
]